<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criador de Mosaico</title>
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/mosaico.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>

    <header class="main-header">
        <h1>Criador de Mosaico</h1>
    </header>

    <nav class="main-nav">
        <ul>
            <li><a href="/">Página Inicial</a></li>
        </ul>
    </nav>

    <main class="content-container mosaico-layout">
        <div class="controls-column">
            <div class="controls-card">
                <h2>1. Carregue e Ajuste</h2>
                <div class="image-upload-area">
                    <p>Clique aqui para selecionar ou ajustar a imagem.</p>
                </div>
            </div>

            <div class="controls-card">
                <h2>2. Método de Divisão</h2>
                <div class="options-group">
                    <label>
                        <input type="radio" name="division-method" value="by-size">
                        Por Medida Total (cm)
                    </label>
                    <label>
                        <input type="radio" name="division-method" value="by-grid">
                        Por Folhas (Colunas/Linhas)
                    </label>
                    <label>
                        <input type="radio" name="division-method" value="by-piece">
                        Por Tamanho do Pedaço (cm)
                    </label>
                    <label>
                        <input type="radio" name="division-method" value="by-proportional-fraction" checked>
                        Por Fração Proporcional
                    </label>
                </div>
            </div>

            <div class="controls-card" id="division-by-size" style="display:none;">
                <h2>3. Tamanho Final</h2>
                <div class="options-group">
                    <label for="final-width">Largura (cm):</label>
                    <input type="number" id="final-width" placeholder="Ex: 50" min="1">
                    <label for="final-height">Altura (cm):</label>
                    <input type="number" id="final-height" placeholder="Ex: 60" min="1">
                </div>
            </div>

            <div class="controls-card" id="division-by-grid" style="display:none;">
                <h2>3. Divisão por Folhas</h2>
                <div class="options-group">
                    <label for="grid-cols">Colunas:</label>
                    <input type="number" id="grid-cols" placeholder="Ex: 3" min="1">
                    <label for="grid-rows">Linhas:</label>
                    <input type="number" id="grid-rows" placeholder="Ex: 2" min="1">
                </div>
                <div id="estimated-dimensions">
                    <p>Dimensões estimadas: <span id="final-width-display">0</span> cm x <span id="final-height-display">0</span> cm</p>
                </div>
            </div>

            <div class="controls-card" id="division-by-piece" style="display:none;">
                <h2>3. Tamanho do Pedaço</h2>
                <div class="options-group">
                    <label for="piece-width">Largura (cm):</label>
                    <input type="number" id="piece-width" placeholder="Ex: 8" min="1">
                    <label for="piece-height">Altura (cm):</label>
                    <input type="number" id="piece-height" placeholder="Ex: 8" min="1">
                </div>
            </div>
            
            <div class="controls-card" id="division-by-proportional-fraction">
                <h2>3. Divisão Proporcional</h2>
                <div class="options-group">
                    <label for="fraction-final-width">Largura Final (cm):</label>
                    <input type="number" id="fraction-final-width" placeholder="Ex: 100" min="1">
                </div>
                 <div class="options-group">
                    <label for="fraction-cols">Divisões Horizontais:</label>
                    <input type="number" id="fraction-cols" placeholder="Ex: 7" min="1">
                    <label for="fraction-rows">Divisões Verticais:</label>
                    <input type="number" id="fraction-rows" placeholder="Ex: 7" min="1">
                </div>
            </div>


            <div class="controls-card">
                <h2>4. Opções de Impressão</h2>
                <div class="options-group">
                    <label for="paper-size">Papel:</label>
                    <select id="paper-size">
                        <option value="A4" selected>A4 (21 x 29.7cm)</option>
                        <option value="A3">A3 (29.7 x 42cm)</option>
                    </select>
                    <label for="orientation">Orientação:</label>
                    <select id="orientation">
                        <option value="portrait" selected>Retrato</option>
                        <option value="landscape">Paisagem</option>
                    </select>
                </div>
                <div class="options-group">
                    <label for="auto-dpi">
                        <input type="checkbox" id="auto-dpi" checked>
                        DPI Automático
                    </label>
                    <label for="dpi-input">DPI:</label>
                    <input type="number" id="dpi-input" value="300" min="72" step="1" disabled>
                </div>
            </div>
        </div>
        
        <div class="preview-column">
            <div class="controls-card">
                <h2>5. Pré-visualização do Mosaico</h2>
                <div id="preview-grid" class="preview-grid-container">
                    <p>Carregue uma imagem e defina as opções para pré-visualizar o mosaico.</p>
                </div>
                <button id="save-button" class="action-button" style="display: none;">Salvar Mosaico (ZIP)</button>
            </div>
        </div>
    </main>
    
    <div id="modal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <div class="image-crop-container">
            <img id="modal-image" style="max-width: 100%;">
        </div>
        <button id="crop-button" class="action-button">Ajustar e Aplicar</button>
      </div>
    </div>
    
    <input type="file" id="image-file-input" accept="image/*" style="display:none;">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script src="/js/mosaico.js" defer></script>
    <script src="/js/main.js" defer></script>
</body>
</html>
